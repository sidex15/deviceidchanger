(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(e){if(e.ep)return;e.ep=!0;const a=s(e);fetch(e.href,a)}})();let M=0;function N(n){return`${n}_callback_${Date.now()}_${M++}`}function O(n,t){return typeof t>"u"&&(t={}),new Promise((s,c)=>{const e=N("exec");window[e]=(r,u,h)=>{s({errno:r,stdout:u,stderr:h}),a(e)};function a(r){delete window[r]}try{ksu.exec(n,JSON.stringify(t),e)}catch(r){c(r),a(e)}})}function D(n){ksu.toast(n)}function j(n){const s=new DOMParser().parseFromString(n,"text/xml"),c={};return s.querySelectorAll("setting").forEach(a=>{const r=a.getAttribute("value"),u=a.getAttribute("package");c[u]={ssaid:r,packageName:u,defaultValue:a.getAttribute("defaultValue"),defaultSysSet:a.getAttribute("defaultSysSet")==="true",tag:a.getAttribute("tag")}}),c}async function l(n){const{errno:t,stdout:s,stderr:c}=await O(n);if(t!=0){D(`stderr: ${c}`);return}else return s}function U(n){let t="";const s="abcdef0123456789";for(let c=0;c<n;c++){const e=Math.floor(Math.random()*s.length);t+=s.charAt(e)}return t}function q(n,t){return Math.floor(Math.random()*(t-n)+n)}function k(){return localStorage.getItem("ssa_uid")||"0"}function H(n){localStorage.setItem("ssa_uid",String(n))}async function X(){return[...(await l("cmd user list")).matchAll(/UserInfo\{(\d+):/g)].map(t=>t[1]).sort()}const p=document.querySelector("body"),_=["/wallpapers/frutiger-aero-wallpapers-1.jpg","/wallpapers/frutiger-aero-wallpapers-2.jpg","/wallpapers/frutiger-aero-wallpapers-3.jpg","/wallpapers/frutiger-aero-wallpapers-4.jpg","/wallpapers/frutiger-aero-wallpapers-5.jpg"],L=_[q(0,_.length)];console.log(`Background image set to: ${L}`);p.style.backgroundImage=`url('${L}')`;p.style.backgroundRepeat="no-repeat";p.style.backgroundAttachment="fixed";p.style.backgroundSize="cover";p.style.backgroundPosition="center";const z="/data/adb/modules/deviceidchanger",i=`/data/system/users/${k()}/settings_ssaid.xml`,f=`${z}/tmp/settings_ssaid.u${k()}.xml`,x="/sdcard/settings_ssaid.xml";await l("uname -m");const B=await l(`file ${i}`);console.log(`SSAID file check result: ${B}`);const b=!!B.includes("ASCII text");console.log(`Is SSAID file ABX: ${b}`);const F=b?await l(`cat ${i}`):await l(`abx2xml ${i} ${f}; cat ${f}`);console.log(`XML data loaded from: ${b?i:f}`);const m=j(F.toString());console.log("Parsed settings:",m);var E=!1;async function R(){const n=document.getElementById("uid-select"),t=document.getElementById("app-pkg");var s=document.getElementById("ssaid-value");const c=document.getElementById("balloon-text"),e=document.getElementById("randomize-ssaid"),a=document.getElementById("apply-ssaid"),r=document.getElementById("default-ssaid"),u=document.getElementById("about-window"),h=document.getElementById("open-about"),A=document.getElementById("close-about"),y=document.getElementById("dialog-div"),I=document.getElementById("dialog-msg"),C=document.getElementById("dialog-close1"),v=document.getElementById("dialog-close2"),P=document.getElementById("backup-settings"),w=document.getElementById("donate-window"),T=document.getElementById("open-donate"),$=document.getElementById("close-donate");var S="";(await X()).forEach(o=>{const d=document.createElement("option");d.value=d.textContent=o,o===k()&&(d.selected=!0),n.appendChild(d)}),n.addEventListener("change",o=>{H(o.target.value),location.reload()});for(const[o,{ssaid:d}]of Object.entries(m)){const g=document.createElement("option");g.value=d,g.textContent=o,o!=="android"&&t.appendChild(g)}t.addEventListener("click",o=>{o.preventDefault()}),t.addEventListener("change",o=>{var d=o.target.value,g=o.target.options[o.target.selectedIndex].textContent;console.log(g,": ",d),s.value=d,S=g}),e.addEventListener("click",()=>{s.value=U(16)}),r.addEventListener("click",()=>{s.value=m[S].defaultValue}),a.addEventListener("click",async()=>{var o=s.value,d=t.options[t.selectedIndex].textContent;o.match(/^[0-9a-f]+$/i)&&o.length==16?(console.log(`Applying SSAID: ${o} for package: ${d}`),b?await l(`sed -i 's/value="${m[d].ssaid}"/value="${o}"/' ${i}`):(await l(`sed -i 's/value="${m[d].ssaid}"/value="${o}"/' ${f}`),await l(`xml2abx ${f} ${i}`)),await l(`chmod 600 ${i}`),m[d].ssaid=o,I.innerHTML=`SSAID for <b>${d}</b> changed to <b>${o}</b>`,v.innerHTML="Reboot",E=!0,y.hidden=!1):(c.hidden=!1,setTimeout(()=>{c.hidden=!0},5e3))}),P.addEventListener("click",async()=>{await l(`cp ${i} ${x}`),I.innerHTML=`Backup created at <b>${x}</b>`,v.innerHTML="Close",E=!1,y.hidden=!1}),h.addEventListener("click",()=>{u.hidden=!1}),A.addEventListener("click",()=>{setTimeout(()=>{u.hidden=!0},100)}),C.addEventListener("click",()=>{setTimeout(()=>{y.hidden=!0},100)}),v.addEventListener("click",()=>{setTimeout(async()=>{E&&await l("reboot"),y.hidden=!0},100)}),T.addEventListener("click",()=>{w.hidden=!1}),$.addEventListener("click",()=>{setTimeout(()=>{w.hidden=!0},100)}),$.addEventListener("click",()=>{setTimeout(()=>{w.hidden=!0},100)})}R();
